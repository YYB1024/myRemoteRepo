<mxfile host="app.diagrams.net" modified="2022-05-20T06:05:26.507Z" agent="5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.4951.64 Safari/537.36" etag="DkiZMeocQj6zNCTigG2u" version="18.0.7" type="github">
  <diagram id="KAGCioQWqWzpXH6GW-4u" name="第 1 页">
    <mxGraphModel dx="1886" dy="850" grid="1" gridSize="6" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="dWjZnnxNej27H9L7fvb9-4" value="" style="html=1;verticalAlign=bottom;startArrow=circle;startFill=1;endArrow=open;startSize=6;endSize=8;rounded=0;strokeColor=#3399FF;" parent="1" edge="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="54" y="66" as="sourcePoint" />
            <mxPoint x="134" y="66" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="dWjZnnxNej27H9L7fvb9-5" value="申报类" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="144" y="54" width="54" height="24" as="geometry" />
        </mxCell>
        <mxCell id="dWjZnnxNej27H9L7fvb9-6" value="" style="html=1;verticalAlign=bottom;startArrow=circle;startFill=1;endArrow=open;startSize=6;endSize=8;rounded=0;strokeColor=#FF3333;" parent="1" edge="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="54" y="108" as="sourcePoint" />
            <mxPoint x="134" y="108" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="dWjZnnxNej27H9L7fvb9-7" value="查询类" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="144" y="96" width="54" height="24" as="geometry" />
        </mxCell>
        <mxCell id="dWjZnnxNej27H9L7fvb9-10" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#000000;" parent="1" source="dWjZnnxNej27H9L7fvb9-8" target="dWjZnnxNej27H9L7fvb9-9" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dWjZnnxNej27H9L7fvb9-8" value="Actor" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;" parent="1" vertex="1">
          <mxGeometry x="90" y="228" width="30" height="60" as="geometry" />
        </mxCell>
        <mxCell id="dWjZnnxNej27H9L7fvb9-13" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#000000;" parent="1" source="dWjZnnxNej27H9L7fvb9-9" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="510" y="258" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="dWjZnnxNej27H9L7fvb9-9" value="缴费工资调整（Facade接口）" style="whiteSpace=wrap;html=1;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="258" y="228" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="dWjZnnxNej27H9L7fvb9-11" value="发起申报类业务" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="138" y="232" width="102" height="24" as="geometry" />
        </mxCell>
        <mxCell id="dWjZnnxNej27H9L7fvb9-14" value="Impl&lt;span style=&quot;&quot;&gt;具体实现&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="390" y="232" width="84" height="24" as="geometry" />
        </mxCell>
        <mxCell id="dWjZnnxNej27H9L7fvb9-19" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#000000;" parent="1" source="dWjZnnxNej27H9L7fvb9-15" target="dWjZnnxNej27H9L7fvb9-18" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dWjZnnxNej27H9L7fvb9-15" value="1、查询业务关系表" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="510" y="232" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="dWjZnnxNej27H9L7fvb9-17" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#000000;" parent="1" source="dWjZnnxNej27H9L7fvb9-16" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="570" y="222" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="dWjZnnxNej27H9L7fvb9-16" value="需要在&lt;span style=&quot;background-color: rgb(255, 255, 254); font-family: Menlo, Monaco, &amp;quot;Courier New&amp;quot;, monospace;&quot;&gt;hpc_business_relationship&lt;br&gt;配置父子任务关系表数据&lt;br&gt;&lt;/span&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="474" y="42" width="192" height="66" as="geometry" />
        </mxCell>
        <mxCell id="dWjZnnxNej27H9L7fvb9-24" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#000000;" parent="1" source="dWjZnnxNej27H9L7fvb9-18" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="978" y="262" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="dWjZnnxNej27H9L7fvb9-18" value="2、包装业务是否批量、在办理期、是否关闭" style="whiteSpace=wrap;html=1;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="738" y="232" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="dWjZnnxNej27H9L7fvb9-21" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#000000;" parent="1" source="dWjZnnxNej27H9L7fvb9-20" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="795" y="228" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="dWjZnnxNej27H9L7fvb9-20" value="需要在&lt;span style=&quot;background-color: rgb(255, 255, 254); font-family: Menlo, Monaco, &amp;quot;Courier New&amp;quot;, monospace;&quot;&gt;hpc_website_business&lt;br&gt;网厅功能表配置&lt;br&gt;&lt;/span&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="714" y="42" width="162" height="60" as="geometry" />
        </mxCell>
        <mxCell id="dWjZnnxNej27H9L7fvb9-22" value="查询网厅功能表" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="804" y="148" width="102" height="24" as="geometry" />
        </mxCell>
        <mxCell id="dWjZnnxNej27H9L7fvb9-29" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#000000;" parent="1" source="dWjZnnxNej27H9L7fvb9-23" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1241" y="156" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="dWjZnnxNej27H9L7fvb9-32" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#000000;" parent="1" source="dWjZnnxNej27H9L7fvb9-23" target="dWjZnnxNej27H9L7fvb9-31" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dWjZnnxNej27H9L7fvb9-23" value="4、插入任务明细记录在明细表中" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1181" y="228" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="dWjZnnxNej27H9L7fvb9-26" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#000000;" parent="1" source="dWjZnnxNej27H9L7fvb9-25" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1176" y="258" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="dWjZnnxNej27H9L7fvb9-27" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#000000;" parent="1" source="dWjZnnxNej27H9L7fvb9-25" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1038" y="150" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="dWjZnnxNej27H9L7fvb9-25" value="3、生成主任务记录" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="978" y="228" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="dWjZnnxNej27H9L7fvb9-28" value="任务状态为=&amp;gt;处理中：01" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="960" y="120" width="150" height="24" as="geometry" />
        </mxCell>
        <mxCell id="dWjZnnxNej27H9L7fvb9-30" value="提交状态为：01 ：未提交&lt;br&gt;办理状态为：01 ：待提交" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1157" y="124" width="150" height="36" as="geometry" />
        </mxCell>
        <mxCell id="dWjZnnxNej27H9L7fvb9-34" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#000000;" parent="1" source="dWjZnnxNej27H9L7fvb9-31" target="dWjZnnxNej27H9L7fvb9-33" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dWjZnnxNej27H9L7fvb9-37" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#000000;" parent="1" source="dWjZnnxNej27H9L7fvb9-31" target="dWjZnnxNej27H9L7fvb9-36" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dWjZnnxNej27H9L7fvb9-31" value="任务状态是否为&lt;br&gt;01处理中" style="rhombus;whiteSpace=wrap;html=1;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1182" y="360" width="117" height="80" as="geometry" />
        </mxCell>
        <mxCell id="dWjZnnxNej27H9L7fvb9-39" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#000000;" parent="1" source="dWjZnnxNej27H9L7fvb9-33" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="108" y="312" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="dWjZnnxNej27H9L7fvb9-43" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#000000;" parent="1" source="dWjZnnxNej27H9L7fvb9-33" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1043.5" y="546" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="dWjZnnxNej27H9L7fvb9-33" value="MQ 发消息（提交数据到客户端）" style="whiteSpace=wrap;html=1;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="983.5" y="370" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="dWjZnnxNej27H9L7fvb9-35" value="是" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1121" y="376" width="30" height="24" as="geometry" />
        </mxCell>
        <mxCell id="dWjZnnxNej27H9L7fvb9-36" value="更新任务为已完成" style="whiteSpace=wrap;html=1;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1377.5" y="370" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="dWjZnnxNej27H9L7fvb9-38" value="否" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1313" y="370" width="30" height="24" as="geometry" />
        </mxCell>
        <mxCell id="dWjZnnxNej27H9L7fvb9-40" value="返回 taskNumber" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="452" y="376" width="108" height="24" as="geometry" />
        </mxCell>
        <mxCell id="dWjZnnxNej27H9L7fvb9-44" value="&lt;span style=&quot;color: rgb(0, 0, 0); font-family: Helvetica; font-size: 13px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: center; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; float: none; display: inline !important;&quot;&gt;topic:hspcore-topic-submit-task&lt;br&gt;&lt;br&gt;messge(&lt;span style=&quot;font-size: 12px; background-color: rgb(248, 249, 250);&quot;&gt;taskNumber、consumerId&lt;/span&gt;)&lt;br&gt;&lt;/span&gt;" style="text;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1050" y="456" width="234" height="60" as="geometry" />
        </mxCell>
        <mxCell id="dWjZnnxNej27H9L7fvb9-47" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#000000;" parent="1" source="dWjZnnxNej27H9L7fvb9-45" target="dWjZnnxNej27H9L7fvb9-46" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <UserObject label="MQ 处理消息" tooltip="cn.com.servyou.hspscore.msg.businesstask.consumer.BusinessTaskSubmitConsumer#handleSubmitMessage" id="dWjZnnxNej27H9L7fvb9-45">
          <mxCell style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
            <mxGeometry x="984" y="546" width="120" height="60" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="dWjZnnxNej27H9L7fvb9-49" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#FFFFFF;strokeColor=#000000;" parent="1" source="dWjZnnxNej27H9L7fvb9-46" target="dWjZnnxNej27H9L7fvb9-48" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <UserObject label="1、调用业务任务提交方法" tooltip="cn.com.servyou.hspscore.service.handler.submit.BusinessTaskSubmitAsyncService#submit" id="dWjZnnxNej27H9L7fvb9-46">
          <mxCell style="whiteSpace=wrap;html=1;rounded=0;" parent="1" vertex="1">
            <mxGeometry x="792" y="546" width="112" height="60" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="dWjZnnxNej27H9L7fvb9-51" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#FFFFFF;strokeColor=#000000;" parent="1" source="dWjZnnxNej27H9L7fvb9-48" target="dWjZnnxNej27H9L7fvb9-50" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Zt5XqulkagOn3WWmMyJd-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="dWjZnnxNej27H9L7fvb9-48" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="613" y="510" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="dWjZnnxNej27H9L7fvb9-48" value="2、根据taskNumber、consumerId查询所有待提交的&lt;b&gt;&lt;font color=&quot;#ff3333&quot;&gt;任务明细&lt;/font&gt;&lt;/b&gt;进行提交" style="whiteSpace=wrap;html=1;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="546" y="546" width="134" height="60" as="geometry" />
        </mxCell>
        <mxCell id="dWjZnnxNej27H9L7fvb9-53" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#FFFFFF;strokeColor=#000000;" parent="1" source="dWjZnnxNej27H9L7fvb9-50" target="dWjZnnxNej27H9L7fvb9-52" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Zt5XqulkagOn3WWmMyJd-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#FF3333;" parent="1" source="dWjZnnxNej27H9L7fvb9-50" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="399" y="498" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <UserObject label="3、校验任务汇总为处理中、任务明细为未提交" tooltip="cn.com.servyou.hspscore.service.handler.submit.BusinessTaskSubmitAsyncService#checkBusinessTask" id="dWjZnnxNej27H9L7fvb9-50">
          <mxCell style="whiteSpace=wrap;html=1;rounded=0;" parent="1" vertex="1">
            <mxGeometry x="339" y="546" width="120" height="60" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="dWjZnnxNej27H9L7fvb9-55" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#FFFFFF;strokeColor=#000000;" parent="1" source="dWjZnnxNej27H9L7fvb9-52" target="dWjZnnxNej27H9L7fvb9-54" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dWjZnnxNej27H9L7fvb9-52" value="4、分别得到任务汇总信息和任务明细信息" style="whiteSpace=wrap;html=1;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="139" y="546" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Zt5XqulkagOn3WWmMyJd-11" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#FF3333;" parent="1" source="dWjZnnxNej27H9L7fvb9-54" target="Zt5XqulkagOn3WWmMyJd-10" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <UserObject label="5、将任务明细按&lt;b&gt;&lt;font color=&quot;#ff3333&quot;&gt;异步流水&lt;/font&gt;&lt;/b&gt;号进行分组" tooltip="cn.com.servyou.hspscore.service.handler.submit.BusinessTaskSubmitAsyncService#processBusinessTaskDetail" id="dWjZnnxNej27H9L7fvb9-54">
          <mxCell style="whiteSpace=wrap;html=1;rounded=0;" parent="1" vertex="1">
            <mxGeometry x="139" y="686" width="119" height="60" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="Zt5XqulkagOn3WWmMyJd-1" value="自产自销" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="954" y="474" width="66" height="24" as="geometry" />
        </mxCell>
        <mxCell id="Zt5XqulkagOn3WWmMyJd-4" value="&lt;meta charset=&quot;utf-8&quot;&gt;&lt;span style=&quot;color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: center; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 249, 250); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; float: none; display: inline !important;&quot;&gt;办理状态为：01 ：待提交&lt;/span&gt;" style="text;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="535" y="480" width="156" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Zt5XqulkagOn3WWmMyJd-8" value="&lt;br&gt;&lt;br&gt;汇总：任务状态为=&amp;gt;处理中：01&lt;br&gt;明细：提交状态为：01 ：未提交&lt;br&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;办理状态为：01 ：待提交" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="324" y="414" width="186" height="78" as="geometry" />
        </mxCell>
        <mxCell id="Zt5XqulkagOn3WWmMyJd-9" value="校验状态是否可以提交" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#FF3333;" parent="1" vertex="1">
          <mxGeometry x="396" y="516" width="138" height="24" as="geometry" />
        </mxCell>
        <mxCell id="Zt5XqulkagOn3WWmMyJd-13" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#FF3333;" parent="1" source="Zt5XqulkagOn3WWmMyJd-10" target="Zt5XqulkagOn3WWmMyJd-12" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <UserObject label="6、将明细循环调用客户端进行提交" tooltip="cn.com.servyou.hspscore.service.handler.submit.BusinessTaskSubmitAsyncService#handSubmitData" id="Zt5XqulkagOn3WWmMyJd-10">
          <mxCell style="whiteSpace=wrap;html=1;rounded=0;" parent="1" vertex="1">
            <mxGeometry x="337.5" y="686" width="120" height="60" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="Zt5XqulkagOn3WWmMyJd-15" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#FF3333;" parent="1" source="Zt5XqulkagOn3WWmMyJd-12" target="Zt5XqulkagOn3WWmMyJd-14" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Zt5XqulkagOn3WWmMyJd-12" value="7、处理v2提交的数据（明细）" style="whiteSpace=wrap;html=1;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="537.5" y="686" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Zt5XqulkagOn3WWmMyJd-17" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#FF3333;" parent="1" source="Zt5XqulkagOn3WWmMyJd-14" target="Zt5XqulkagOn3WWmMyJd-16" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <UserObject label="7、1根据业务类型区分，具体对应那个Hander" tooltip="cn.com.servyou.hspscore.service.v2.employee.service.factory.WebsiteCodeFactory==&gt;&#xa;此方法使用个策略工厂模式，获取所有实现BaseInsuranceV2SubmitService接口的方法中WebsiteBusinessCodeEnum（Map），然后根据传入的业务code从而判断具体去执行那个实现类【lmpl】注：当有新的业务是需要添加新业务的service（继承基础Service）和具体实现类" id="Zt5XqulkagOn3WWmMyJd-14">
          <mxCell style="whiteSpace=wrap;html=1;rounded=0;" parent="1" vertex="1">
            <mxGeometry x="737.5" y="686" width="120" height="60" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="Zt5XqulkagOn3WWmMyJd-22" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#FF3333;" parent="1" source="Zt5XqulkagOn3WWmMyJd-16" target="Zt5XqulkagOn3WWmMyJd-19" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Zt5XqulkagOn3WWmMyJd-26" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#FF3333;" parent="1" source="Zt5XqulkagOn3WWmMyJd-16" target="Zt5XqulkagOn3WWmMyJd-25" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <UserObject label="8、提交数据&lt;br&gt;（到gateway）" tooltip="cn.com.servyou.hspscore.service.handler.submit.BusinessTaskSubmitAsyncService#handlerSubmit&#xa;&#xa;根据gateway返回的对象BaseResponseDTO来判断&#xa;成功时候：&#xa;code = &quot;GW000000&quot;&#xa;msg=SUCCESS，其他情况失败&#xa;&#xa;提交数据到gateway失败&#xa;ProcessState：04 提交失败 &#xa;SubmitState ：01 未提交&#xa;&#xa;提交数据到gateway成功，响应失败信息&#xa;ProcessState：04 提交失败 &#xa;SubmitState ：01 未提交&#xa;&#xa;" id="Zt5XqulkagOn3WWmMyJd-16">
          <mxCell style="whiteSpace=wrap;html=1;rounded=0;" parent="1" vertex="1">
            <mxGeometry x="937.5" y="686" width="120" height="60" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="Zt5XqulkagOn3WWmMyJd-19" value="processState：02 提交中&lt;br&gt;submitState: 02 未反馈" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#FF3333;" parent="1" vertex="1">
          <mxGeometry x="922.5" y="618" width="150" height="36" as="geometry" />
        </mxCell>
        <mxCell id="Zt5XqulkagOn3WWmMyJd-23" value="更新" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#FF3333;" parent="1" vertex="1">
          <mxGeometry x="996" y="660" width="42" height="24" as="geometry" />
        </mxCell>
        <mxCell id="Zt5XqulkagOn3WWmMyJd-24" value="成功" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#FF3333;" parent="1" vertex="1">
          <mxGeometry x="954" y="660" width="42" height="24" as="geometry" />
        </mxCell>
        <mxCell id="Zt5XqulkagOn3WWmMyJd-28" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#FF3333;" parent="1" source="Zt5XqulkagOn3WWmMyJd-25" target="Zt5XqulkagOn3WWmMyJd-27" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <UserObject label="9、具体到对应业务实现类真正提交" tooltip="cn.com.servyou.hspscore.service.v2.employee.service.BaseInsuranceV2SubmitService#submit" id="Zt5XqulkagOn3WWmMyJd-25">
          <mxCell style="whiteSpace=wrap;html=1;rounded=0;" parent="1" vertex="1">
            <mxGeometry x="1137.5" y="686" width="120" height="60" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="Zt5XqulkagOn3WWmMyJd-30" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontColor=#FF3333;" parent="1" source="Zt5XqulkagOn3WWmMyJd-27" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="192" y="822" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1398" y="792" />
              <mxPoint x="192" y="792" />
            </Array>
          </mxGeometry>
        </mxCell>
        <UserObject label="10、Hspsgateway Facade客户端" tooltip="cn.com.servyou.hspsgateway.facade.v2.employee.HgInsuranceRegisterV2Facade#send" id="Zt5XqulkagOn3WWmMyJd-27">
          <mxCell style="whiteSpace=wrap;html=1;rounded=0;" parent="1" vertex="1">
            <mxGeometry x="1337.5" y="686" width="120" height="60" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="Zt5XqulkagOn3WWmMyJd-33" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#000000;" parent="1" source="Zt5XqulkagOn3WWmMyJd-31" target="Zt5XqulkagOn3WWmMyJd-32" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <UserObject label="&lt;font color=&quot;#000000&quot;&gt;1、处理请求（通用）&lt;/font&gt;" tooltip="cn.com.servyou.hspsgateway.facadeimpl.v2.RequestV2Template#doRequest" id="Zt5XqulkagOn3WWmMyJd-31">
          <mxCell style="whiteSpace=wrap;html=1;fontColor=#FFFFFF;" parent="1" vertex="1">
            <mxGeometry x="129" y="828" width="120" height="60" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="y-Ov5CjwgG_3xpqOnm8k-2" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="Zt5XqulkagOn3WWmMyJd-32">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="593.5" y="858" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="y-Ov5CjwgG_3xpqOnm8k-4" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="Zt5XqulkagOn3WWmMyJd-32" target="y-Ov5CjwgG_3xpqOnm8k-3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <UserObject label="&lt;font color=&quot;#000000&quot;&gt;1、2、根据websiteCode和ClientBusinessCode获取对应的报文实现类(网厅个性化)&lt;br&gt;&lt;/font&gt;" tooltip="cn.com.servyou.hspsgateway.facadeimpl.v2.RequestV2Template#getDatagramService&#xa;&#xa;通过注解实现业务的策略模式，该注解分为2类：网厅的个性化实现和默认实现，通过具体的website和clientBusinessCode去实现具体的实现类&#xa;注：当有新的业务来时要添加新的实现类和相应的注解" id="Zt5XqulkagOn3WWmMyJd-32">
          <mxCell style="whiteSpace=wrap;html=1;fontColor=#FFFFFF;" parent="1" vertex="1">
            <mxGeometry x="329" y="828" width="163" height="60" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="y-Ov5CjwgG_3xpqOnm8k-6" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="y-Ov5CjwgG_3xpqOnm8k-3" target="y-Ov5CjwgG_3xpqOnm8k-5">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <UserObject label="&lt;font color=&quot;#000000&quot;&gt;1、3 实现统一报文接口的方法（会话、登录）&lt;br&gt;&lt;/font&gt;" tooltip="cn.com.servyou.hspsgateway.datagram.v2.DatagramService#generateTaskParam&#xa;&#xa;" id="y-Ov5CjwgG_3xpqOnm8k-3">
          <mxCell style="whiteSpace=wrap;html=1;fontColor=#FFFFFF;" vertex="1" parent="1">
            <mxGeometry x="572" y="828" width="163" height="60" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="y-Ov5CjwgG_3xpqOnm8k-10" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#000000;" edge="1" parent="1" source="y-Ov5CjwgG_3xpqOnm8k-5" target="y-Ov5CjwgG_3xpqOnm8k-9">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <UserObject label="&lt;font color=&quot;#000000&quot;&gt;1、3、1、组装公共参数&lt;br&gt;DatagramCommonInfo&amp;lt;T&amp;gt; commonInfo&lt;br&gt;&lt;/font&gt;" tooltip="cn.com.servyou.hspsgateway.datagram.v2.AbstractDatagramService#generateTaskParam&#xa;&#xa;1、查询人社网厅密码&#xa;cn.com.servyou.hspsgateway.integration.hrcustomer.password.HrssPasswordFacadeClient#queryByInsuranceCategory&#xa;&#xa;错误提示：&quot;登录信息不完整，请上传登录信息&quot;&#xa;" id="y-Ov5CjwgG_3xpqOnm8k-5">
          <mxCell style="whiteSpace=wrap;html=1;fontColor=#FFFFFF;fillColor=default;" vertex="1" parent="1">
            <mxGeometry x="827" y="828" width="151" height="60" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="y-Ov5CjwgG_3xpqOnm8k-12" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#000000;" edge="1" parent="1" source="y-Ov5CjwgG_3xpqOnm8k-9" target="y-Ov5CjwgG_3xpqOnm8k-11">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <UserObject label="&lt;font color=&quot;#000000&quot;&gt;1、3、2、组装任意参数&lt;br&gt;transformedJsonObjList&lt;br&gt;&lt;/font&gt;" tooltip="cn.com.servyou.hspsgateway.datagram.v2.AbstractDatagramService#doGenerateTaskParam&#xa;&#xa;1、获取转换数据&#xa;cn.com.servyou.hspsgateway.core.v2.send.impl.TransformSenderServicelmpl#send&#xa;注：这个就是我们在运营平台配的入参转换（将我们的入参转换为daqcore对应的入参）&#xa;&#xa;错误提示：&quot;通过hrparam进行转换失败&quot;&#xa;&#xa;2、构建公共信息BaseJson&#xa;注：里面会获取mock消息的redisKey(setTestKey)&#xa;cn.com.servyou.hspsgateway.datagram.v2.AbstractDatagramService#redisMock&#xa;&#xa;所以在redis中设置业务相应的key和value&#xa;" id="y-Ov5CjwgG_3xpqOnm8k-9">
          <mxCell style="whiteSpace=wrap;html=1;fontColor=#FFFFFF;fillColor=default;" vertex="1" parent="1">
            <mxGeometry x="1058" y="828" width="151" height="60" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="y-Ov5CjwgG_3xpqOnm8k-14" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#000000;" edge="1" parent="1" source="y-Ov5CjwgG_3xpqOnm8k-11" target="y-Ov5CjwgG_3xpqOnm8k-13">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <UserObject label="&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;2、调用发送的接口获取调用结果 返回调用结果&lt;/span&gt;" tooltip="cn.com.servyou.hspsgateway.core.v2.send.impl.ClientSenderV2ServiceImpl#send" id="y-Ov5CjwgG_3xpqOnm8k-11">
          <mxCell style="whiteSpace=wrap;html=1;fontColor=#FFFFFF;fillColor=default;" vertex="1" parent="1">
            <mxGeometry x="1289" y="828" width="151" height="60" as="geometry" />
          </mxCell>
        </UserObject>
        <UserObject label="3、调用DaqcoreFace客户端接口" tooltip="cn.com.servyou.daqcore.facade.DaqTaskFacade#batchAddDaqTaskNew" id="y-Ov5CjwgG_3xpqOnm8k-13">
          <mxCell style="whiteSpace=wrap;html=1;fontColor=default;fillColor=#FFFFFF;" vertex="1" parent="1">
            <mxGeometry x="1535.5" y="828" width="120" height="60" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="y-Ov5CjwgG_3xpqOnm8k-24" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#000000;" edge="1" parent="1" source="y-Ov5CjwgG_3xpqOnm8k-16">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="432" y="990" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="y-Ov5CjwgG_3xpqOnm8k-16" value="当客户端把任务提交到成功到网厅则进行MQ消息" style="rounded=0;whiteSpace=wrap;html=1;fontColor=default;fillColor=#FFFFFF;labelBorderColor=none;labelBackgroundColor=none;strokeColor=#FF3333;" vertex="1" parent="1">
          <mxGeometry x="129" y="960" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="y-Ov5CjwgG_3xpqOnm8k-23" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#000000;" edge="1" parent="1" source="y-Ov5CjwgG_3xpqOnm8k-18" target="y-Ov5CjwgG_3xpqOnm8k-22">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <UserObject label="MQ 处理消息" tooltip="cn.com.servyou.hspscore.msg.businesstask.consumer.BusinessTaskConsumer#handleMessage" id="y-Ov5CjwgG_3xpqOnm8k-18">
          <mxCell style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
            <mxGeometry x="438" y="961" width="120" height="60" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="y-Ov5CjwgG_3xpqOnm8k-20" value="&lt;span style=&quot;background-color: rgb(255, 255, 255);&quot;&gt;topic：&lt;span style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 9.8pt;&quot;&gt;daqcore-topic-hsps&lt;/span&gt;&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=default;" vertex="1" parent="1">
          <mxGeometry x="246" y="997" width="192" height="24" as="geometry" />
        </mxCell>
        <UserObject label="message" tooltip="cn.com.servyou.hspscore.msg.businesstask.domain.BusinessTaskMessage" id="y-Ov5CjwgG_3xpqOnm8k-21">
          <mxCell style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#000000;" vertex="1" parent="1">
            <mxGeometry x="269" y="959" width="66" height="24" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="y-Ov5CjwgG_3xpqOnm8k-22" value="1、message参数校验及获取封装" style="whiteSpace=wrap;html=1;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="691" y="961" width="120" height="60" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
